(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ce727ee"],{"5afd":function(t,e,n){},"5fa4":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-wrap pt-5"},[n("div",{staticClass:"col-12 col-lg-9"},[n("section",{staticClass:"grid col-12 col-lg-6 col-md-8 mx-auto"},[n("div",{staticClass:"form"},[n("form",{staticClass:"form d-flex flex-column align-items-stretch",attrs:{action:""}},[n("h2",{staticClass:"text-center"},[t._v("Deposit")]),t._v(" "),n("label",{staticClass:"mt-4 pb-2",attrs:{for:"currency"}},[t._v("Currency: ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCurrency,expression:"selectedCurrency"}],staticClass:"form-select",attrs:{name:"currency",id:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedCurrency=e.target.multiple?n:n[0]}}},t._l(t.currencies,(function(e){return n("option",{key:e.value,domProps:{value:e.value}},[t._v("\n\t\t\t\t\t"+t._s(e.label)+"\n\t\t\t\t\t")])})),0),t._v(" "),n("label",{staticClass:"mt-4 pb-2",attrs:{for:"amount"}},[t._v("Amount in usd: ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formState.amount,expression:"formState.amount"}],staticClass:"form-control",attrs:{type:"number",name:"amount",step:"0.1"},domProps:{value:t.formState.amount},on:{input:function(e){e.target.composing||t.$set(t.formState,"amount",e.target.value)}}}),t._v(" "),[t.pair_loading?[n("a-spin",{attrs:{size:"small"}})]:n("span",[t._v("\n\t\t\t\t\t\t\tâ‰ˆ "+t._s(Number(+t.pair_value*t.formState.amount).toFixed(4))+" \n\t\t\t\t\t\t")])],t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t._deposit}},[t._v("Pay")])],2)])])]),t._v(" "),n("div",{staticClass:"col-12 col-lg-3 mt-5 mt-lg-0"},[n("div",[t._v("\n\t\t\tDeposits:\n\t\t\t"),t.user&&t.user.deposit_set&&t.user.deposit_set.length>0?n("div",[t._l(t.user&&t.user.deposit_set||[],(function(e,o){return[n("div",{key:o+1},[n("hr"),t._v(" "),n("span",[t._v(" "+t._s(e.amount+" "+e.currency))]),t._v(" "),n("p",[t._v("Status: "+t._s(e.status))]),t._v(" "),"pending"===e.status?n("a",{attrs:{href:e.url}},[t._v("Payment Link")]):t._e()])]}))],2):n("span",[n("hr"),t._v(" No deposits yet")])])])])},r=[],s=n("916c"),a={components:{},data(){return{user:{},loading:!1,pair_loading:!1,currencies:[{label:"LiteCoin Testnet",value:"litecointestnet"}],rawCurrencies:[],selectedCurrency:{},formState:{amount:1,currency:"",test:0,action:"deposit",withdrawAddress:""},pair:"",pair_value:"",activeKey:"0",activeKey2:"0"}},methods:{openNotificationWithIcon:t=>console.log(t),handleChange:t=>{(void 0).selectedCurrency=t},_deposit(){this.loading=!0;const t={amount:this.formState.amount,currency:this.selectedCurrency,url:"",id:"",status:"new",type:"Deposit"};Object(s["b"])({...t,test:this.formState.test}).then(e=>{t.url=e.url,t.id=e.id,1!==e.error&&e.url&&e.url.length>0?(this.openNotificationWithIcon("success","Success!","Redirecting..."),window.open(e.url,"_self")):this.openNotificationWithIcon("error",e.message,e.extra)}).catch(t=>{console.log(t)}).finally(t=>{this.loading=!1})},_withdraw(){this.loading=!0;const t={amount:this.formState.amount,currency:this.selectedCurrency,url:"",id:"",status:"new",type:"Withdraw",address:this.formState.withdrawAddress};Object(s["e"])({...t,test:this.formState.test}).then(e=>{t.id=e.id,1!==e.error?(this.openNotificationWithIcon("success","Success!","Payout queued !"),Object(s["d"])().then(t=>this.user=t)):this.openNotificationWithIcon("error",e.message,e.extra)}).catch(t=>{console.log(t)}).finally(t=>{this.loading=!1})},signout(){localStorage.removeItem("token"),window.location.reload()}},watch:{selectedCurrency(t){console.log(t,this.rawCurrencies),this.pair="USD_"+this.rawCurrencies.find(e=>e.alfaname===t).symbol,this.pair_loading=!0,Object(s["c"])(this.pair).then(t=>{1!==t.error?this.pair_value=t.price:this.price_value=0}).catch(t=>{console.log(t)}).finally(t=>{this.pair_loading=!1})}},mounted(){Object(s["d"])().then(t=>this.user=t),Object(s["a"])().then(t=>{const e=t.map(t=>({label:t.name,value:t.alfaname}));this.currencies=e,this.rawCurrencies=t,this.selectedCurrency=e[0].value}).catch(t=>console.log(t)),this.pair_loading=!0,Object(s["c"])(this.pair).then(t=>{1!==t.error?this.pair_value=t.price:this.price_value=0}).catch(t=>{console.log(t)}).finally(t=>{this.pair_loading=!1})}},i=a,c=(n("9535"),n("2877")),l=Object(c["a"])(i,o,r,!1,null,null,null);e["default"]=l.exports},"916c":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return u}));const o={"Content-Type":"application/json"},r="http://localhost:8000/api/v1/",s=t=>new URL(t,r).href,a=t=>{const e=localStorage.getItem("token"),n={...o,Authorization:"Token "+e},r={type:t.currency,amount:t.amount,test:t.test};return new Promise((t,e)=>{fetch(s("request/deposit/"),{method:"post",body:JSON.stringify(r),headers:n}).then(t=>t.json()).then(e=>t(e)).catch(t=>(console.log(t),e("error")))})},i=t=>{const e=localStorage.getItem("token"),n={...o,Authorization:"Token "+e},r={type:t.currency,amount:t.amount,test:t.test,address:t.address};return new Promise((t,e)=>{fetch(s("request/withdraw/"),{method:"post",body:JSON.stringify(r),headers:n}).then(t=>t.json()).then(e=>t(e)).catch(t=>(console.log(t),e("error")))})},c=t=>new Promise((e,n)=>{fetch(s("request/pair_price/"),{method:"post",body:JSON.stringify({pair:t}),headers:o}).then(t=>t.json()).then(t=>e(t)).catch(t=>(console.log(t),n("error")))}),l=()=>{const t=localStorage.getItem("token"),e={Authorization:"Token  "+t};return new Promise((t,n)=>{fetch(s("userinfo"),{method:"get",headers:e}).then(t=>t.json()).then(e=>t(e&&e[0]||{})).catch(t=>(console.log(t),n("error")))})},u=()=>new Promise((t,e)=>{fetch(s("currencies"),{method:"get"}).then(t=>t.json()).then(e=>t(e)).catch(t=>(console.log(t),e("error")))})},9535:function(t,e,n){"use strict";n("5afd")}}]);
//# sourceMappingURL=chunk-2ce727ee.43dbc3a2.js.map